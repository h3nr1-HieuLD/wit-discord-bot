"use strict";var E=Object.create;var d=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var w=Object.getPrototypeOf,F=Object.prototype.hasOwnProperty;var b=(t,n)=>{for(var e in n)d(t,e,{get:n[e],enumerable:!0})},v=(t,n,e,o)=>{if(n&&typeof n=="object"||typeof n=="function")for(let r of g(n))!F.call(t,r)&&r!==e&&d(t,r,{get:()=>n[r],enumerable:!(o=h(n,r))||o.enumerable});return t};var u=(t,n,e)=>(e=t!=null?E(w(t)):{},v(n||!t||!t.__esModule?d(e,"default",{value:t,enumerable:!0}):e,t)),M=t=>v(d({},"__esModule",{value:!0}),t);var _={};b(_,{handleEvents:()=>W});module.exports=M(_);var m=u(require("fs")),p=u(require("path")),l=require("discord.js"),y=require("../lib/client"),i=require("../lib/logger");const N=["client","guild"];function W(){const t=y.DiscordClient.getInstance(),n=async e=>{let o=0;const r=m.default.readdirSync(p.default.join(__dirname,`../events/${e}`)).filter(a=>(a.endsWith(".ts")||a.endsWith(".js"))&&!a.startsWith("_"));for(const a of r){const c=a.split(".")[0];if(!(c in l.Events)){i.Logger.warn(`Invalid event name '${c}', skipping...`);continue}try{const s=await import(`../events/${e}/${a}`),f=s.default?.default?s.default:s;if(!f.default)throw new Error(`Missing default export in '${a}'`);const $=f.default;t.on(l.Events[c],$),++o}catch(s){i.Logger.error(`Failed to load event '${c}': 
	${s}`);continue}}return o};N.forEach(async e=>{try{const o=await n(e);i.Logger.info(`Loaded ${o} events from '${e}'`)}catch(o){if(o.code==="ENOENT")return;i.Logger.error(`Failed to load events in ${e}: 
	${o}`)}})}0&&(module.exports={handleEvents});
